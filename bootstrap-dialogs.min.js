(function(){var a,b,c,d,e,f,g,h;"undefined"!=typeof require&&null!==require?(a=require("jquery"),b=require("bootstrap")):(a=this.jQuery,b=this.Bootstrap||(this.Bootstrap={})),("undefined"==typeof g||null===g)&&(g={exports:e={}},b.Dialogs=e),d=13,c=27,f=function(b,c){var d;return d=a('<button type="button" class="btn">').html(b),c&&d.addClass("btn-"+c),d},h=function(b){var c,d,e,g,h,i;for(i=[],g=0,h=b.length;h>g;g++)d=b[g],e=null,d instanceof Array&&(e=d[1],d=d[0]),c="string"==typeof d?f(d):a(d),e instanceof Function&&c.click(e),i.push(c);return i},e.alert=function(b){var c,g,h,i;return null==b&&(b={}),c={title:"Alert",ok:"OK",lock:!0,danger:!1},b=a.extend(c,b),g=b.danger?"danger":"primary",h=e.dialog({title:b.title,body:b.body,lock:b.lock,buttons:[[f(b.ok,g),function(){return h.resolve()}]]}),i=function(a){return a.which===d?h.resolve():void 0},a("body").on("keyup",i),h.always(function(){return a("body").off("keyup",i)})},e.confirm=function(b){var c,g,h,i;return null==b&&(b={}),c={title:"Please confirm",ok:"OK",cancel:"Cancel",danger:!1},b=a.extend(c,b),g=b.danger?"danger":"primary",h=e.dialog({title:b.title,body:b.body,buttons:[[b.cancel,function(){return h.reject()}],[f(b.ok,g),function(){return h.resolve()}]]}),b["return"]&&(i=function(a){return a.which===d?h.resolve():void 0},a("body").on("keyup",i),h.always(function(){return a("body").off("keyup",i)})),h},e.dialog=function(b){var d,f,g,i,j,k,l,m;return null==b&&(b={}),l=b.title,g=b.body,i=b.buttons||[],m=[a("<h3>").html(l)],b.lock||(d=a('<button type="button" class="close" data-dismiss="modal"\n  aria-hidden="true">&times;</button>'),m.unshift(d)),f=a('<div class="modal hide fade">').html([a('<div class="modal-header">').html(m),g?a('<div class="modal-body">').html(g):"",a('<div class="modal-footer">').html(h(i))]),k=a.Deferred(),k.el=f[0],k.$el=f,f.on("hidden",function(){return"pending"===k.state()?k.reject():void 0}),b.lock||(j=function(a){return a.which===c?k.reject():void 0}),k.always(function(){return e.enableScrolling(),j&&a("body").off("keyup",j),f.modal("hide"),f.remove()}),j&&a("body").on("keyup",j),f.modal(b.lock?{backdrop:"static",keyboard:!1}:{keyboard:!1}),e.disableScrolling(),k},e.disableScrolling=function(){return void a("html").css({position:"fixed",top:-Math.abs(a(window.document).scrollTop()),width:"100%"})},e.enableScrolling=function(){var b;return b=Math.abs(parseInt(a("html").css("top"))),a("html").css({position:"static",top:"auto"}),void a(window.document).scrollTop(b)},e.prompt=function(b){var c,g,h,i,j,k,l;return null==b&&(b={}),g={title:"Please enter a value",body:"",ok:"OK",cancel:"Cancel"},b=a.extend(g,b),i=b.danger?"danger":"primary",l=function(){return j.resolve(c.val())},k=function(){return j.reject()},h=function(a){return a.which===d?l():void 0},c=a('<input type="text">'),j=e.dialog({title:b.title,body:[b.body,c],buttons:[[b.cancel,k],[f(b.ok,i),l]]}),a("body").on("keyup",h),j.always(function(){return a("body").off("keyup",h)}),c.focus(),j.$input=c,j}}).call(this);